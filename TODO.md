# TrueDungeon Mod — TODO List

## Dungeon Map (Ключ и Задание)

### NBT-структура
- [x] Реализована структура NBT для предмета Dungeon Map:
  - dungeon_type
  - dungeon_level
  - dungeon_objective
  - dungeon_reward
  - dungeon_state ("sealed", "active", "complete")
- [x] Отображение Dungeon Map в тултипе с кастомным стилем и цветами уровня (звёзды).
- [x] Расширенный тултип при удержании Shift.
- [x] Добавлен тултип для party с отображением участников.
- [x] Реализована активация карты (ПКМ по запечатанной карте делает игрока лидером, устанавливает состояние и создаёт party).


### Визуальные состояния предмета
- [ ] Модели и текстуры для трёх состояний:
    - `sealed` — запечатанное письмо
    - `active` — активный ключ
    - `complete` — выполненный квест
- [ ] Реализовать смену модели через `CustomModelData`

### Взаимодействие игрока
- [ ] ПКМ по двери с `sealed` — меняем состояние на `active` — проверка NBT, телепорт в подземелье, генерация данджа по типу и уровню
- [ ] ПКМ по другому игроку — отправка приглашения в пати, чат-сообщение, подтверждение/отклонение, управление списком `party`

### Кооперативный режим
- [ ] Телепорт всех членов пати при активации ключа
- [ ] Синхронизация прогресса и статуса завершения для каждого участника
- [ ] Установка флага `dungeon_completed` для всех участников по окончании

### NPC — Квест-дилер
- [ ] Создание NPC для выдачи заданий и принятия выполненных
- [ ] Выдача карты с NBT заданием
- [ ] Выдача наград при завершении и удаление/обнуление карты

### Утилиты и отладка
- [ ] Команды для выдачи кастомных карт с нужными NBT (для теста и администрирования)
- [ ] Логи для отладки состояния карт и пати

---

# Notes

- Следить за совместимостью с мультиплеером.
